[supervisord]
nodaemon=true
user=root

[program:ollama]
command=/usr/local/bin/ollama serve
autostart=true
autorestart=true
priority=10
stopsignal=SIGTERM
stdout_logfile=/workspace/logs/ollama.log
stderr_logfile=/workspace/logs/ollama.err

[program:openwebui]
command=bash -c 'uvicorn open_webui.main:app --host 0.0.0.0 --port 8080'
directory=/app/backend
autostart=true
autorestart=true
startsecs=15
priority=20
stopsignal=SIGTERM
stdout_logfile=/workspace/logs/openwebui.log
stderr_logfile=/workspace/logs/openwebui.err

[program:searxng]
# --- NEW TEST ---
# We are bypassing gunicorn to see if it's the source of the problem.
# This uses the simpler, built-in Flask server for testing.
command=/usr/local/searxng/searx-pyenv/bin/python searx/webapp.py
directory=/usr/local/searxng
autostart=true
autorestart=true
startsecs=5
priority=30
stopsignal=SIGTERM
stdout_logfile=/workspace/logs/searxng.log
