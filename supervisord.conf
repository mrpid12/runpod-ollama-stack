[supervisord]
nodaemon=true
user=root

[program:ollama]
command=/usr/bin/ollama serve
autostart=true
autorestart=true
priority=10
stdout_logfile=/workspace/logs/ollama.log
stderr_logfile=/workspace/logs/ollama.err

[program:openwebui]
command=/app/backend/start.sh
autostart=true
autorestart=true
startsecs=15
priority=20
stdout_logfile=/workspace/logs/openwebui.log
stderr_logfile=/workspace/logs/openwebui.err

[program:searxng]
command=/usr/local/searxng/searx-pyenv/bin/python searxng/webapp.py
directory=/usr/local/searxng
autostart=true
autorestart=true
startsecs=5
priority=30
stdout_logfile=/workspace/logs/searxng.log
stderr_logfile=/workspace/logs/searxng.err

[program:pullmodel]
command=/workspace/runpod-ollama-stack/pull_model.sh
autostart=true
autorestart=false
startsecs=30
priority=99
stdout_logfile=/workspace/logs/pullmodel.log
stderr_logfile=/workspace/logs/pullmodel.err
